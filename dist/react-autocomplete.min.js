!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.Combobox=e(require("react")):t.Combobox=e(t.React)}(this,function(t){return function(t){function e(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return t[s].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports={Combobox:n(1),Option:n(2)}},function(t,e,n){function s(t){var e=null!=t.props.label;return e?t.props.label:t.props.children}function i(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),""===t||t===e?!1:-1===e.toLowerCase().indexOf(t.toLowerCase())?!1:!0}var o=n(3),u=0,a=function(){},c=n(4),l=n(2);t.exports=o.createClass({displayName:"exports",propTypes:{autocomplete:o.PropTypes.oneOf(["both","inline","list"]),onInput:o.PropTypes.func,onSelect:o.PropTypes.func,value:o.PropTypes.any},getDefaultProps:function(){return{autocomplete:"both",onInput:a,onSelect:a,value:null}},getInitialState:function(){return{value:this.props.value,inputValue:this.findInputValue(),isOpen:!1,focusedIndex:null,matchedAutocompleteOption:null,usingKeyboard:!1,activedescendant:null,listId:"rf-combobox-list-"+ ++u,menu:{children:[],activedescendant:null,isEmpty:!0}}},componentWillMount:function(){this.setState({menu:this.makeMenu()})},componentWillReceiveProps:function(t){this.setState({menu:this.makeMenu(t.children)})},makeMenu:function(t){var e,n=!0;return t=t||this.props.children,o.Children.forEach(t,function(t,s){if(t.type===l.type){n=!1;var i=t.props;this.state.value===i.value&&(i.id=i.id||"rf-combobox-selected-"+ ++u,i.isSelected=!0,e=i.id),i.onBlur=this.handleOptionBlur,i.onClick=this.selectOption.bind(this,t),i.onFocus=this.handleOptionFocus,i.onKeyDown=this.handleOptionKeyDown.bind(this,t),i.onMouseEnter=this.handleOptionMouseEnter.bind(this,s)}}.bind(this)),{children:t,activedescendant:e,isEmpty:n}},getClassName:function(){var t=c(this.props.className,"rf-combobox");return this.state.isOpen&&(t=c(t,"rf-combobox-is-open")),t},clearSelectedState:function(t){this.setState({focusedIndex:null,inputValue:null,value:null,matchedAutocompleteOption:null,activedescendant:null},t)},handleInputChange:function(){var t=this.refs.input.getDOMNode().value;this.clearSelectedState(function(){this.props.onInput(t),this.state.isOpen||this.showList()}.bind(this))},handleInputBlur:function(){var t=null!=this.state.focusedIndex;t||(this.maybeSelectAutocompletedOption(),this.hideList())},handleOptionBlur:function(){this.blurTimer=setTimeout(this.hideList,0)},handleOptionFocus:function(){clearTimeout(this.blurTimer)},handleInputKeyUp:function(t){!this.state.menu.isEmpty&&8!==t.keyCode&&this.props.autocomplete.match(/both|inline/)&&this.autocompleteInputValue()},autocompleteInputValue:function(){if(0!=this.props.autocomplete&&0!==this.props.children.length){var t=this.refs.input.getDOMNode(),e=t.value,n=this.props.children.length?this.props.children[0]:this.props.children,o=s(n),u=i(e,o);u&&(t.value=o,t.setSelectionRange(e.length,o.length),this.setState({matchedAutocompleteOption:n}))}},handleButtonClick:function(){this.state.isOpen?this.hideList():this.showList(),this.focusInput()},showList:function(){this.props.autocomplete.match(/both|list/)&&this.setState({isOpen:!0})},hideList:function(){this.setState({isOpen:!1})},hideOnEscape:function(){this.hideList(),this.focusInput()},focusInput:function(){this.refs.input.getDOMNode().focus()},selectInput:function(){this.refs.input.getDOMNode().select()},inputKeydownMap:{38:"focusPrevious",40:"focusNext",27:"hideOnEscape",13:"selectOnEnter"},optionKeydownMap:{38:"focusPrevious",40:"focusNext",13:"selectOption",27:"hideOnEscape"},handleKeydown:function(t){var e=this.inputKeydownMap[t.keyCode];e&&(t.preventDefault(),this.setState({usingKeyboard:!0}),this[e].call(this))},handleOptionKeyDown:function(t,e){var n=this.optionKeydownMap[e.keyCode];return n?(e.preventDefault(),this.setState({usingKeyboard:!0}),void this[n].call(this,t)):void this.selectInput()},handleOptionMouseEnter:function(t){this.state.usingKeyboard?this.setState({usingKeyboard:!1}):this.focusOptionAtIndex(t)},selectOnEnter:function(){this.maybeSelectAutocompletedOption(),this.refs.input.getDOMNode().select()},maybeSelectAutocompletedOption:function(){this.state.matchedAutocompleteOption&&this.selectOption(this.state.matchedAutocompleteOption,{focus:!1})},selectOption:function(t,e){e=e||{},this.setState({value:t.props.value,inputValue:s(t),matchedAutocompleteOption:null},function(){this.props.onSelect(t.props.value,t),this.hideList(),e.focus!==!1&&this.selectInput()}.bind(this))},focusNext:function(){if(!this.state.menu.isEmpty){var t=null==this.state.focusedIndex?0:this.state.focusedIndex+1;this.focusOptionAtIndex(t)}},focusPrevious:function(){if(!this.state.menu.isEmpty){var t=this.props.children.length-1,e=null==this.state.focusedIndex?t:this.state.focusedIndex-1;this.focusOptionAtIndex(e)}},focusSelectedOption:function(){var t;o.Children.forEach(this.props.children,function(e,n){e.props.value===this.state.value&&(t=n)}.bind(this)),this.showList(),this.setState({focusedIndex:t},this.focusOption)},findInputValue:function(t){t=t||this.props.value;var e;return o.Children.forEach(this.props.children,function(n){n.props.value===t&&(e=s(n))}),e||t},focusOptionAtIndex:function(t){if(!this.state.isOpen&&this.state.value)return this.focusSelectedOption();this.showList();var e=this.props.children.length;-1===t?t=e-1:t===e&&(t=0),this.setState({focusedIndex:t},this.focusOption)},focusOption:function(){var t=this.state.focusedIndex;this.refs.list.getDOMNode().childNodes[t].focus()},render:function(){return o.DOM.div({className:this.getClassName()},o.DOM.input({ref:"input",className:"rf-combobox-input",defaultValue:this.props.value,value:this.state.inputValue,onChange:this.handleInputChange,onBlur:this.handleInputBlur,onKeyDown:this.handleKeydown,onKeyUp:this.handleInputKeyUp,role:"combobox","aria-activedescendant":this.state.menu.activedescendant,"aria-autocomplete":this.props.autocomplete,"aria-owns":this.state.listId}),o.DOM.span({"aria-hidden":"true",className:"rf-combobox-button",onClick:this.handleButtonClick},"â–¾"),o.DOM.div({id:this.state.listId,ref:"list",className:"rf-combobox-list","aria-expanded":this.state.isOpen+"",role:"listbox"},this.state.menu.children))}})},function(t,e,n){var s=n(3),i=n(4);t.exports=s.createClass({propTypes:{value:s.PropTypes.any.isRequired,label:s.PropTypes.string},getDefaultProps:function(){return{role:"option",tabIndex:"-1",className:"rf-combobox-option",isSelected:!1}},render:function(){var t=this.props;return t.isSelected&&(t.className=i(t.className,"rf-combobox-selected")),s.DOM.div(t)}})},function(e){e.exports=t},function(t){function e(t,e){return t?t.indexOf(e)>-1?t:t+" "+e:e}t.exports=e}])});